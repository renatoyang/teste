<p><strong>&nbsp;</strong></p>
<p><strong>&nbsp;</strong></p>
<p><strong>&nbsp;</strong></p>
<p><strong>&nbsp;</strong></p>
<p><strong>&nbsp;</strong></p>
<p><strong>&nbsp;</strong></p>
<p>Integra&ccedil;&atilde;o B2B - Via Varejo X Parceiros</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<table>
<tbody>
<tr style="height: 36px;">
<td style="height: 36px;" width="66">
<p><strong>Vers&atilde;o</strong></p>
</td>
<td style="height: 36px;" width="217">
<p><strong>Descri&ccedil;&atilde;o</strong></p>
</td>
<td style="height: 36px;" width="142">
<p><strong>Autor</strong></p>
</td>
<td style="height: 36px;" width="142">
<p><strong>Data</strong></p>
</td>
</tr>
<tr style="height: 46px;">
<td style="height: 46px;" width="66">
<p><strong>5.0</strong></p>
</td>
<td style="height: 46px;" width="217">
<p>Cria&ccedil;&atilde;o de nova vers&atilde;o</p>
</td>
<td style="height: 46px;" width="142">
<p>Andr&eacute; Savoia</p>
</td>
<td style="height: 46px;" width="142">
<p>17/12/2018</p>
</td>
</tr>
<tr style="height: 82px;">
<td style="height: 82px;" width="66">
<p><strong>5.1</strong></p>
</td>
<td style="height: 82px;" width="217">
<p>Criptografia, dicion&aacute;rio de dados e roteiro para instala&ccedil;&atilde;o do certificado</p>
</td>
<td style="height: 82px;" width="142">
<p>Lucas Fernandes</p>
</td>
<td style="height: 82px;" width="142">
<p>27/12/2018</p>
</td>
</tr>
<tr style="height: 46px;">
<td style="height: 46px;" width="66">
<p><strong>&nbsp;</strong></p>
</td>
<td style="height: 46px;" width="217">
<p>&nbsp;</p>
</td>
<td style="height: 46px;" width="142">
<p>&nbsp;</p>
</td>
<td style="height: 46px;" width="142">
<p>&nbsp;</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Sum&aacute;rio</p>
<ol>
<li><a href="#_Toc3568230"> Objetivo. 5</a></li>
<li><a href="#_Toc3568231"> Vis&atilde;o geral 5</a></li>
<li><a href="#_Toc3568232"> Premissas. 6</a></li>
<li><a href="#_Toc3568233"> Carga inicial 6</a></li>
<li><a href="#_Toc3568234"> Disponibiliza&ccedil;&atilde;o das informa&ccedil;&otilde;es. 6</a></li>
</ol>
<p><a href="#_Toc3568235">5.1. Download de Arquivos. 6</a></p>
<p><a href="#_Toc3568236">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ProdutoCompleto. 7</a></p>
<p><a href="#_Toc3568237">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ProdutoParcial 8</a></p>
<p><a href="#_Toc3568238">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Categoria. 8</a></p>
<p><a href="#_Toc3568239">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Estoque. 9</a></p>
<p><a href="#_Toc3568240">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DisponibilidadePre&ccedil;o. 9</a></p>
<p><a href="#_Toc3568241">5.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Mensageria. 10</a></p>
<p><a href="#_Toc3568242">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Benef&iacute;cios. 13</a></p>
<p><a href="#_Toc3568243">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Pre&ccedil;o espec&iacute;fico. 13</a></p>
<p><a href="#_Toc3568244">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lojista. 13</a></p>
<p><a href="#_Toc3568245">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Categoria. 14</a></p>
<p><a href="#_Toc3568246">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ProdutoParcial 14</a></p>
<p><a href="#_Toc3568247">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Estoque. 15</a></p>
<p><a href="#_Toc3568248">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Tracking. 15</a></p>
<p><a href="#_Toc3568249">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DisponibilidadePre&ccedil;o. 15</a></p>
<p><a href="#_Toc3568250">o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Campanha. 15</a></p>
<ol start="6">
<li><a href="#_Toc3568251"> Integra&ccedil;&atilde;o B2B. 16</a></li>
</ol>
<p><a href="#_Toc3568252">6.1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WebService &ndash; Servi&ccedil;o SOAP. 16</a></p>
<p><a href="#_Toc3568253">6.2.&nbsp; API Rest. 16</a></p>
<ol start="7">
<li><a href="#_Toc3568254"> Criptografia dos dados de cart&atilde;o. 18</a></li>
<li><a href="#_Toc3568255"> Dicion&aacute;rio de dados. 18</a></li>
<li><a href="#_Toc3568256"> Ambiente de Testes. 22</a></li>
</ol>
<p><a href="#_Toc3568257">9.1. Urls. 23</a></p>
<p><a href="#_Toc3568258">9.2. Certificados. 23</a></p>
<ol start="10">
<li><a href="#_Toc3568259"> D&uacute;vidas ou Ocorr&ecirc;ncias. 30</a></li>
</ol>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1><a name="_Toc3568230"></a>1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Objetivo</h1>
<p>Este documento descreve as formas de integra&ccedil;&atilde;o entre o B2B e os parceiros.</p>
<h1><a name="_Toc3568231"></a>2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Vis&atilde;o geral</h1>
<p>Hoje o B2B trabalha com 2 formas de disponibiliza&ccedil;&atilde;o de informa&ccedil;&otilde;es aos parceiros, e 2 formas de recebimento de informa&ccedil;&otilde;es. A forma de recebimento via WebService SOAP est&aacute; obsoleta, e s&oacute; ser&aacute; citada neste documento.</p>
<p><br /> <br /> </p>
<h1><a name="_Toc3568232"></a>3. Premissas</h1>
<p>Os contratos, campanhas e Token de autentica&ccedil;&atilde;o dos parceiros precisam estar devidamente cadastrados no sistema corporativo da via varejo. Os Ips dos parceiros precisam estar liberados no firewall da Via Varejo, para que possam acessar os servi&ccedil;os de integra&ccedil;&atilde;o e download de arquivos.</p>
<h1><a name="_Toc3568233"></a>4. Carga inicial</h1>
<p>Independente da forma que o parceiro recebe as informa&ccedil;&otilde;es, a carga inicial sempre &eacute; necess&aacute;ria. Hoje a mensageria n&atilde;o possui uma funcionalidade onde todas as informa&ccedil;&otilde;es s&atilde;o enviadas. A carga inicial &eacute; realizada atrav&eacute;s do download de arquivos. Todos os arquivos e informa&ccedil;&otilde;es necess&aacute;rias, est&atilde;o detalhadas no t&oacute;pico <a href="#_Download_de_arquivos">Download de arquivos</a>.</p>
<h1><a name="_Toc3568234"></a>5. Disponibiliza&ccedil;&atilde;o das informa&ccedil;&otilde;es</h1>
<h2><a name="_Toc3568235"></a>5.1. Download de Arquivos<br /> </h2>
<p>S&atilde;o disponibilizados 5 arquivos ZIP com as informa&ccedil;&otilde;es necess&aacute;rias para o parceiro se integrar com o B2B. O processo dos XMLS dos arquivos ser&aacute; necess&aacute;rio na carga inicial, e nos casos onde os parceiros optem em n&atilde;o trabalhar com a integra&ccedil;&atilde;o via mensageria. O detalhamento dos campos ser&aacute; feito no t&oacute;pico <a href="#_7._Dicion&aacute;rio_de">7. Dicion&aacute;rio de dados</a></p>
<h3><a name="_Toc3568236"></a>o&nbsp;&nbsp; ProdutoCompleto</h3>
<p>Arquivo que cont&eacute;m os produtos e skus ativos das bandeiras. Os produtos s&atilde;o em arquivos XML, agrupados por categoria. Ex: B2BCompleto_001.xml, B2BCompleto_013.xml, etc.</p>
<table>
<tbody>
<tr>
<td width="162">
<p>Recorr&ecirc;ncia</p>
</td>
<td width="357">
<p>Semanal &ndash; Domingo &agrave;s 03:00 AM</p>
</td>
</tr>
<tr>
<td width="162">
<p>Novo do arquivo</p>
</td>
<td width="357">
<p>B2BCompleto.zip</p>
</td>
</tr>
<tr>
<td width="162">
<p>Urls</p>
</td>
<td width="357">
<p>http://b2b.extra.com.br/Arquivos/CatalogoB2B/Completo?idParceiro=XX</p>
<p>http://b2b.casasbahia.com.br/Arquivos/CatalogoB2B/Completo?idParceiro=XX</p>
<p>http://b2b.pontofrio.com.br/Arquivos/CatalogoB2B/Completo?idParceiro=XX</p>
<p>http://b2b.barateiro.com.br/Arquivos/CatalogoB2B/Completo?idParceiro=XX</p>
<p>http://b2b.lojahp.com.br/Arquivos/CatalogoB2B/Completo?idParceiro=XX</p>
<p>http://b2b.aocloja.com.br/Arquivos/CatalogoB2B/Completo?idParceiro=XX</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table width="520">
<tbody>
<tr>
<td width="520">
<p><strong>Estrutura padr&atilde;o do XML</strong></p>
</td>
</tr>
<tr>
<td width="520">
<p>&lt;?xml version="1.0"?&gt;</p>
<p>&lt;XMLProduto DataCriacao="16/12/2018 12:04:45"&gt;</p>
<p>&nbsp; &lt;Produtos&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;Produto Codigo="7253" DisplayName="Produto Exemplo" DescricaoLonga="Descri&ccedil;&atilde;o Longa de exemplo" Categoria="361" CodigoFabricante="23284" Fabricante="Multivis&atilde;o" FotoPequena="2613886" FotoMedia="2613904" FotoGrande="5677024" PalavraChave="Exemplo, Produto, Via Varejo" MaisVendidos="0"&gt;</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;Skus&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Sku Codigo="8507" Preco="1.984,90" UltimaModificacao="07/12/2018 08:48:28" Habilitado="true" Modelo="." EAN="7896643410268" Peso="3710.0000" Altura="16.0000" Largura="23.0000" Comprimento="26.0000"&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Imagens&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Imagem ImagemMenor="2613874" ImagemMaior="2613883" ImagemZoom="5663544" Ordem="1" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Imagem ImagemMenor="5664354" ImagemMaior="5664357" Ordem="2" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Imagens&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Grupos /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Sku&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Skus&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;FichaTecnica&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&lt;Grupos&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Grupo Codigo="740" Nome="Caracter&iacute;sticas"&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Itens&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Item Descricao="Caracter&iacute;sticas Gerais" Valor="- Para tv de 19&amp;quot; a 32&amp;quot;- Fix. VESA 50 / 75 / 100 / 100x200 / 120x180 / 200" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Item Descricao="Suporta at&eacute; (kg)" Valor="30" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Item Descricao="Acabamento" Valor="Desenvolvido em Alum&iacute;nio e Revestido com Pintura Ep&oacute;xi (Eletrost&aacute;tica)" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Itens&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Grupo&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Grupo Codigo="514" Nome="Especifica&ccedil;&otilde;es T&eacute;cnicas"&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Itens&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Item Descricao="Aten&ccedil;&atilde;o" Valor="N&atilde;o nos responsabilizamos pela montagem " /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Item Descricao="Conte&uacute;do da embalagem" Valor="- 1 Suporte Automatizado de Parede Multivis&atilde;o TWISTO 1532" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Item Descricao="Garantia" Valor="12 meses" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Itens&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Grupo&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Grupos&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/FichaTecnica&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;/Produto&gt;</p>
<p>&nbsp; &lt;/Produtos&gt;</p>
<p>&lt;/XMLProduto&gt;</p>
</td>
</tr>
</tbody>
</table>
<p><br /> </p>
<h3><a name="_Toc3568237"></a>o&nbsp;&nbsp; ProdutoParcial<br /> </h3>
<p>Arquivo que cont&eacute;m os produtos e skus que foram alterados nas bandeiras, nas &uacute;ltimas 24h. Ser&atilde;o gerados produtos ativos e inativos nesse processo. Os produtos s&atilde;o gerados em arquivos XML, agrupados por categoria. Ex: B2BParcial_001.xml, B2BParcial_013.xml, etc.</p>
<table>
<tbody>
<tr>
<td width="162">
<p>Recorr&ecirc;ncia</p>
</td>
<td width="357">
<p>Di&aacute;ria &ndash; &agrave;s 05:00 AM</p>
</td>
</tr>
<tr>
<td width="162">
<p>Novo do arquivo</p>
</td>
<td width="357">
<p>B2BParcial.zip</p>
</td>
</tr>
<tr>
<td width="162">
<p>Urls</p>
</td>
<td width="357">
<p>http://b2b.extra.com.br/Arquivos/CatalogoB2B/Parcial?idParceiro=XX</p>
<p>http://b2b.casasbahia.com.br/Arquivos/CatalogoB2B/Parcial?idParceiro=XX</p>
<p>http://b2b.pontofrio.com.br/Arquivos/CatalogoB2B/Parcial?idParceiro=XX</p>
<p>http://b2b.barateiro.com.br/Arquivos/CatalogoB2B/Parcial?idParceiro=XX</p>
<p>http://b2b.lojahp.com.br/Arquivos/CatalogoB2B/Parcial?idParceiro=XX</p>
<p>http://b2b.aocloja.com.br/Arquivos/CatalogoB2B/Parcial?idParceiro=XX</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table width="527">
<tbody>
<tr>
<td width="527">
<p><strong>Estrutura padr&atilde;o do XML</strong></p>
</td>
</tr>
<tr>
<td width="527">
<p>Mesma estrutura disponibilizada para o arquivo completo, conforme t&oacute;pico <a href="#_ProdutoCompleto">ProdutoCompleto</a></p>
</td>
</tr>
</tbody>
</table>
<h3><a name="_Toc3568238"></a>o&nbsp;&nbsp; Categoria<br /> </h3>
<p>Arquivo que cont&eacute;m todas as categorias ativas das bandeiras. As categorias s&atilde;o geradas dentro de apenas um arquivo B2BCategoria.xml . Os xmls cont&eacute;m a categoria e o relacionamento de heran&ccedil;a, que se relacionam atrav&eacute;s da propriedade idCategoriaPai. A propriedade n&iacute;vel indica qual &eacute; o n&iacute;vel da categoria (de 1 a 3)<br /> </p>
<table>
<tbody>
<tr>
<td width="162">
<p>Recorr&ecirc;ncia</p>
</td>
<td width="357">
<p>Di&aacute;ria &ndash; &agrave;s 05:00 AM</p>
</td>
</tr>
<tr>
<td width="162">
<p>Novo do arquivo</p>
</td>
<td width="357">
<p>B2BCategoria.zip</p>
</td>
</tr>
<tr>
<td width="162">
<p>Urls</p>
</td>
<td width="357">
<p>http://b2b.extra.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
<p>http://b2b.casasbahia.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
<p>http://b2b.pontofrio.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
<p>http://b2b.barateiro.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
<p>http://b2b.lojahp.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
<p>http://b2b.aocloja.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table width="527">
<tbody>
<tr>
<td width="527">
<p><strong>Estrutura padr&atilde;o do XML</strong></p>
</td>
</tr>
<tr>
<td width="527">
<p>&lt;Resposta DataCriacao="18/12/2018 12:06:35"&gt;</p>
<p>&nbsp; &lt;Categorias&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;Categoria IdCategoria="2673" IdDepartamento="2673" Level="1" Nome="Alameda de Servi&ccedil;os"&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Categoria IdCategoria="3337" IdCategoriaPai="2673" IdDepartamento="2673" Level="2" Nome="Assinatura Digital" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Categoria IdCategoria="2701" IdCategoriaPai="2673" IdDepartamento="2673" Level="2" Nome="Cart&atilde;o Presente" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Categoria IdCategoria="2043" IdCategoriaPai="2673" IdDepartamento="2673" Level="2" Nome="Cursos Online"&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Categoria IdCategoria="787" IdCategoriaPai="2043" IdDepartamento="2673" Level="3" Nome="Curso Educa&ccedil;&atilde;o" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Categoria IdCategoria="1986" IdCategoriaPai="2043" IdDepartamento="2673" Level="3" Nome="Curso Fotografia" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Categoria IdCategoria="734" IdCategoriaPai="2043" IdDepartamento="2673" Level="3" Nome="Curso Gest&atilde;o e Neg&oacute;cios" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Categoria IdCategoria="1988" IdCategoriaPai="2043" IdDepartamento="2673" Level="3" Nome="Curso L&iacute;ngua Portuguesa" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Categoria IdCategoria="2003" IdCategoriaPai="2043" IdDepartamento="2673" Level="3" Nome="Curso Online Arte e Cultura" /&gt;</p>
<p>&nbsp; &lt;/Categorias&gt;</p>
<p>&lt;/Resposta&gt;</p>
</td>
</tr>
</tbody>
</table>
<h3><a name="_Toc3568239"></a>o&nbsp;&nbsp; Estoque</h3>
<p><br /> Arquivo que cont&eacute;m o estoque de produtos das bandeiras. O espelho atual do estoque &eacute; gerado no arquivo B2BEstoque.xml.<br /> </p>
<table>
<tbody>
<tr>
<td width="162">
<p>Recorr&ecirc;ncia</p>
</td>
<td width="357">
<p>De 1h em 1h</p>
</td>
</tr>
<tr>
<td width="162">
<p>Novo do arquivo</p>
</td>
<td width="357">
<p>B2BEstoque.zip</p>
</td>
</tr>
<tr>
<td width="162">
<p>Urls</p>
</td>
<td width="357">
<p>http://b2b.extra.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
<p>http://b2b.casasbahia.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
<p>http://b2b.pontofrio.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
<p>http://b2b.barateiro.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
<p>http://b2b.lojahp.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
<p>http://b2b.aocloja.com.br/Arquivos/CatalogoB2B/Categoria?idParceiro=XX</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table width="527">
<tbody>
<tr>
<td width="527">
<p><strong>Estrutura padr&atilde;o do XML</strong></p>
</td>
</tr>
<tr>
<td width="527">
<p>&lt;?xml version="1.0"?&gt;</p>
<p>&lt;XMLEstoqueEntidade DataCriacao="18/12/2018 02:21:02"&gt;</p>
<p>&nbsp; &lt;Estoques&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;Estoque IdSku="2142" IdLojista="15" FlagSkuSaldoDisponivel="true" SaldoEstoque="0" DataUltimaAtualizacao="2018-12-17T06:10:02" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;Estoque IdSku="2197" IdLojista="15" FlagSkuSaldoDisponivel="true" SaldoEstoque="72" DataUltimaAtualizacao="2018-12-17T14:30:02" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;Estoque IdSku="2198" IdLojista="15" FlagSkuSaldoDisponivel="true" SaldoEstoque="1" DataUltimaAtualizacao="2018-12-17T06:30:01" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;Estoque IdSku="2202" IdLojista="15" FlagSkuSaldoDisponivel="true" SaldoEstoque="59" DataUltimaAtualizacao="2018-12-18T13:50:02" /&gt;</p>
<p>&nbsp; &lt;/Estoques&gt;</p>
<p>&lt;/XMLEstoqueEntidade&gt;</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3><a name="_Toc3568240"></a>o&nbsp;&nbsp; DisponibilidadePre&ccedil;o</h3>
<p><br /> Arquivo que cont&eacute;m todos os pre&ccedil;os e disponibilidade dos skus ativos das bandeiras. O n&oacute; TipoEntrega informa quais s&atilde;o as formas de entrega dispon&iacute;veis para o Sku (ex: retira em loja) Diferentemente da disponibiliza&ccedil;&atilde;o via mensageria (t&oacute;pico <a href="#_Mensageria">Mensageria</a>), o arquivo de disponibilidade, gera pre&ccedil;os e disponibilidade &ldquo;default&rdquo; das bandeiras.&nbsp; <br /> </p>
<table>
<tbody>
<tr>
<td width="162">
<p>Recorr&ecirc;ncia</p>
</td>
<td width="357">
<p>De 1h em 1h</p>
</td>
</tr>
<tr>
<td width="162">
<p>Novo do arquivo</p>
</td>
<td width="357">
<p>B2BDisponibilidade_<strong>codigoParceiro</strong>_DataHoraMinuto.zip</p>
</td>
</tr>
<tr>
<td width="162">
<p>Urls</p>
</td>
<td width="357">
<p>http://b2b.extra.com.br/Arquivos/CatalogoB2B/Disponibilidade?idParceiro=XX</p>
<p>http://b2b.casasbahia.com.br/Arquivos/CatalogoB2B/Disponibilidade?idParceiro=XX</p>
<p>http://b2b.pontofrio.com.br/Arquivos/CatalogoB2B/Disponibilidade?idParceiro=XX</p>
<p>http://b2b.barateiro.com.br/Arquivos/CatalogoB2B/Disponibilidade?idParceiro=XX</p>
<p>http://b2b.lojahp.com.br/Arquivos/CatalogoB2B/Disponibilidade?idParceiro=XX</p>
<p>http://b2b.aocloja.com.br/Arquivos/CatalogoB2B/Disponibilidade?idParceiro=XX</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table width="527">
<tbody>
<tr>
<td width="527">
<p><strong>Estrutura padr&atilde;o do XML </strong></p>
</td>
</tr>
<tr>
<td width="527">
<p>&lt;Resposta DataCriacao="18/12/2018 14:30:03"&gt;</p>
<p>&nbsp; &lt;Produtos&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;Produto codigo="1000069800" precoDe="1.678,32" precoPor="1.398,60" disponibilidade="1" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;Produto codigo="1000069801" precoDe="1.678,32" precoPor="1.398,60" disponibilidade="1" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;Produto codigo="1000069802" precoDe="1.678,32" precoPor="1.398,60" disponibilidade="1" /&gt;</p>
<p>&nbsp;&nbsp;&nbsp; &lt;Produto codigo="1000069803" precoDe="1.678,32" precoPor="1.398,60" disponibilidade="1" /&gt;</p>
<p>&nbsp; &lt;/Produtos&gt;</p>
<p>&lt;Campanhas&gt;</p>
<p>&lt;Campanha IdCampanha="5154"&gt;</p>
<p>&nbsp; &lt;Produto codigo="1949223" precoPor="189,90" disponibilidade="0" /&gt;</p>
<p>&nbsp; &lt;Produto codigo="8185374" precoPor="239,90" disponibilidade="0" /&gt;</p>
<p>&nbsp; &lt;Produto codigo="3111677" precoPor="379,90" disponibilidade="0" /&gt;</p>
<p>&lt;/Campanha&gt;</p>
<p>&lt;/Campanhas&gt;</p>
<p>&lt;/Resposta&gt;</p>
</td>
</tr>
</tbody>
</table>
<p><br /> </p>
<h2><a name="_Toc3568241"></a>5.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Mensageria<br /> </h2>
<p>A disponibiliza&ccedil;&atilde;o via mensageria, foi criada para deixar os parceiros sempre atualizados com as informa&ccedil;&otilde;es das bandeiras. Com essa integra&ccedil;&atilde;o, o download e o processamento dos arquivos ZIP periodicamente, n&atilde;o ser&aacute; necess&aacute;rio. Todas as propriedades enviadas nos arquivos, s&atilde;o enviadas tamb&eacute;m via mensageria.</p>
<p>Todos os parceiros que utilizam a mensageria, precisam configurar no sistema, os endpoints abaixo. Hoje, essas informa&ccedil;&otilde;es s&atilde;o configuradas dentro do sistema Admin do comercial do B2B. As informa&ccedil;&otilde;es precisam ser enviadas neste formato para a equipe comercial da Via Varejo.</p>
<table>
<tbody>
<tr>
<td width="168">
<p><strong>Integra&ccedil;&atilde;o</strong></p>
</td>
<td width="169">
<p><strong>URL Endpoint</strong></p>
</td>
<td width="203">
<p><strong>Qt de itens por Request</strong></p>
</td>
</tr>
<tr>
<td width="168">
<p>Lojista</p>
</td>
<td width="169">
<p>https://xxxx/xxxx</p>
</td>
<td width="203">
<p>99999</p>
</td>
</tr>
<tr>
<td width="168">
<p>Categoria</p>
</td>
<td width="169">
<p>https://xxxx/xxxx</p>
</td>
<td width="203">
<p>99999</p>
</td>
</tr>
<tr>
<td width="168">
<p>Produto Parcial</p>
</td>
<td width="169">
<p>https://xxxx/xxxx</p>
</td>
<td width="203">
<p>99999</p>
</td>
</tr>
<tr>
<td width="168">
<p>Disponibilidade</p>
</td>
<td width="169">
<p>https://xxxx/xxxx</p>
</td>
<td width="203">
<p>99999</p>
</td>
</tr>
<tr>
<td width="168">
<p>Estoque</p>
</td>
<td width="169">
<p>https://xxxx/xxxx</p>
</td>
<td width="203">
<p>99999</p>
</td>
</tr>
<tr>
<td width="168">
<p>Tracking</p>
</td>
<td width="169">
<p>https://xxxx/xxxx</p>
</td>
<td width="203">
<p>99999</p>
</td>
</tr>
<tr>
<td width="168">
<p>Campanha</p>
</td>
<td width="169">
<p>https://xxxx/xxxx</p>
</td>
<td width="203">
<p>99999</p>
</td>
</tr>
</tbody>
</table>
<p><br /> - Todas as mensagens s&atilde;o enviadas, esperam os HTTP CODE = 200 ou 201. <br /> - Utilizamos o conceito de Circuit Breaker para o envio das informa&ccedil;&otilde;es.(5 tentativas a cada 10 segs).</p>
<p>- O par&acirc;metro &ldquo;Authorization&rdquo; &eacute; enviado no header de todas as mensagens. Esse header &eacute; cadastrado dentro do AdminB2B para garantir a comunica&ccedil;&atilde;o entre os parceiros e Via varejo. O parceiro solicita o cadastro do token a equipe de TI ou comercial da Via Varejo. Os Status Code &ldquo;401 N&atilde;o autorizado&rdquo; e &ldquo;405 M&eacute;todo n&atilde;o permitido&rdquo; podem ser utilizados, caso o token n&atilde;o esteja de acordo. &nbsp;</p>
<p>- Todas as mensagens ser&atilde;o enviadas com o contente-type &ldquo;Content-Type: application/json&rdquo;<br /> <br /> * A utiliza&ccedil;&atilde;o da integra&ccedil;&atilde;o via Mensageria n&atilde;o exime o parceiro de efetuar a carga inicial dos XMLS. Hoje a mensageria envia as informa&ccedil;&otilde;es alteradas ou criadas, ou seja, n&atilde;o envia todas as informa&ccedil;&otilde;es necess&aacute;rias para o parceiro que iniciou a integra&ccedil;&atilde;o com o B2B.</p>
<p><br /> <br /> <strong>Request Padr&atilde;o</strong></p>
<p>Em todas as mensagens, enviaremos as seguintes informa&ccedil;&otilde;es:</p>
<p><strong>Bandeira</strong>: Informa de qual bandeira que se trata a mensagem informada. Valores poss&iacute;veis (Extra, Pontofrio, CasasBahia, Barateiro,HP e AOC)</p>
<p><strong>CorrelationId</strong>: Identifica&ccedil;&atilde;o da mensagem de ponta a ponta para facilitar rastreabilidade das informa&ccedil;&otilde;es entre Via Varejo e Parceiro.</p>
<p><strong>Message/Content</strong>: Campo onde ser&atilde;o enviadas as informa&ccedil;&otilde;es da mensagem. Para cada integra&ccedil;&atilde;o teremos um json desserializado.</p>
<table width="558">
<tbody>
<tr>
<td width="558">
<p><strong>Request padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="558">
<p>{</p>
<p>"Bandeira":"Extra",&nbsp;&nbsp; <br /> &nbsp;"CorrelationId" : "9639e252-41e5-463d-b923-679c6c1e4bf5",</p>
<p>&nbsp;"Message":</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {"Content":"XXXXX&rdquo;}</p>
<p>}</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p><strong>Response Padr&atilde;o<br /> <br /> </strong>Todas as mensagens enviadas aguardam sempre o status HTTP_CODE = 200 ou 201, com a seguinte estrutura abaixo. Somente o campo <strong>IsValid = true do body e </strong>o HTTP STATUS ser&atilde;o consistidos nas requisi&ccedil;&otilde;es.</p>
<table width="558">
<tbody>
<tr>
<td width="558">
<p><strong>Response padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="558">
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; "IsValid": true,</p>
<p>&nbsp;&nbsp;&nbsp; "StatusCode": 0,</p>
<p>&nbsp;&nbsp;&nbsp; "Messages": [</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Code": "0",</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Content": "",</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Type": "No Error"</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp; ]</p>
<p>}</p>
</td>
</tr>
</tbody>
</table>
<p><strong><br /> </strong>Todas mensagens que n&atilde;o responderem nesse padr&atilde;o, ser&atilde;o consideradas como n&atilde;o entregues. <br /> </p>
<p>Exemplo de mensagem enviada:<br /> <br /> <strong>Request:</strong></p>
<p>POST /Integracao/AtualizarLojista HTTP/1.1</p>
<p>Host: www.parceirofake.hlg-b2b.net</p>
<p>Content-Type: application/json</p>
<p>Authorization: D3vPq6N4FkG3AffQA9d4Rq6A33qChu1l0obQFp6wgZbGNme9A1y68XIi+b9BNcb1wdnlBVupAyiafCO1cXnhRB18HNqLfq90idSXvm++36Y=</p>
<p>cache-control: no-cache</p>
<p>Postman-Token: 2345c260-f6c7-4680-979c-f6549b61ec2f</p>
<p>{</p>
<p>&nbsp; "Bandeira":"Extra",</p>
<p>&nbsp;&nbsp;"CorrelationId" : "9639e252-41e5-463d-b923-679c6c1e4bf5",</p>
<p>&nbsp; "Message":{"Content":"{\"Lojistas\":[{\"Codigo\":15,\"NomeLojista\":\"Extra\"}]}"}</p>
<p>}</p>
<p><strong>Response:<br /> <br /> </strong>{</p>
<p>&nbsp;&nbsp;&nbsp; "IsValid": true,<br /> &nbsp;&nbsp;&nbsp; "StatusCode": 200,<br /> &nbsp;&nbsp;&nbsp; "Token": null,<br /> &nbsp;&nbsp;&nbsp; "Messages": [<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Code": "200",<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Content": "",<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Type": "No Error"<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp; ]<br /> }</p>
<p>Abaixo ser&atilde;o detalhados todos os t&oacute;picos enviados via mensageria. O detalhamento dos campos ser&aacute; feito no t&oacute;pico <a href="#_7._Dicion&aacute;rio_de">7. Dicion&aacute;rio de dados</a></p>
<h3><a name="_Toc3568242"></a>o&nbsp;&nbsp; Benef&iacute;cios</h3>
<p>&nbsp;</p>
<p>Mensagem cont&eacute;m o benef&iacute;cio cadastrado ou que sofreram algum tipo de atualiza&ccedil;&atilde;o.</p>
<table width="577">
<tbody>
<tr>
<td width="577">
<p><strong>Request padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="577">
<p>{</p>
<p>"CorrelationId":"2270dc82-b3c6-41f0-bf25-5057c97a0cad",</p>
<p>"Topic":null,</p>
<p>"Key":null,</p>
<p>"Bandeira":"Extra",</p>
<p>"Token":null,</p>
<p>"Message":{"Content":"{\"Skus\":[{\"Codigo\":4217101,\"PrecoDe\":2339.88,\"PrecoPor\":1799.9,\"Disponibilidade\":1,\"IdCampanha\":1337,\"IdLojista\":15,\"TiposEntrega\":[{\"IdTipoEntrega\":12,\"FlagDisponivel\":true}]},{\"Codigo\":4217101,\"PrecoDe\":2339.88,\"PrecoPor\":1799.9,\"Disponibilidade\":1,\"IdCampanha\":2216,\"IdLojista\":15,\"TiposEntrega\":[{\"IdTipoEntrega\":12,\"FlagDisponivel\":true}]}]}"}</p>
<p>}</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3><a name="_Toc3568243"></a>o&nbsp;&nbsp; Pre&ccedil;o espec&iacute;fico</h3>
<p>&nbsp;</p>
<p>Mensagem cont&eacute;m a atualiza&ccedil;&atilde;o de pre&ccedil;o para os Skus de uma campanha</p>
<table width="577">
<tbody>
<tr>
<td width="577">
<p><strong>Request padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="577">
<p>{</p>
<p>"CorrelationId":"6dc0d677-3cd2-49bf-bb91-2170f36a264c",</p>
<p>"Topic":null,</p>
<p>"Key":null</p>
<p>,"Bandeira":"Extra",</p>
<p>"Token":null,</p>
<p>"Message":{"Content":"{\"Skus\":[{\"Codigo\":5104,\"PrecoDe\":65.2,\"PrecoPor\":25.96,\"Disponibilidade\":1,\"IdCampanha\":2274,\"IdLojista\":15,\"TiposEntrega\":null}]}"}</p>
<p>}</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3><a name="_Toc3568244"></a>o&nbsp;&nbsp; Lojista</h3>
<p>&nbsp;</p>
<p>Mensagem cont&eacute;m lojistas marketplace ou lojistas via varejo (extra, pontofrio, casasbahia) que foram cadastrados, ou sofreram algum tipo de atualiza&ccedil;&atilde;o.</p>
<table width="577">
<tbody>
<tr>
<td width="577">
<p><strong>Request padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="577">
<p>{</p>
<p>&nbsp; "Bandeira":"Extra",</p>
<p>&nbsp; "CorrelationId" : "9639e252-41e5-463d-b923-679c6c1e4bf5",</p>
<p>&nbsp; "Message":{"Content":"{\"Lojistas\":[{\"Codigo\":15,\"NomeLojista\":\"Extra\"}]}"}</p>
<p>}</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3><a name="_Toc3568245"></a>o&nbsp;&nbsp; Categoria</h3>
<p><br /> Mensagem cont&eacute;m categorias que foram cadastradas, ou sofreram algum tipo de atualiza&ccedil;&atilde;o.</p>
<table width="577">
<tbody>
<tr>
<td width="577">
<p><strong>Request padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="577">
<p>{</p>
<p>&nbsp; "Bandeira":"Extra",</p>
<p>&nbsp;&nbsp; "CorrelationId" : "9639e252-41e5-463d-b923-679c6c1e4bf5",</p>
<p>&nbsp;&nbsp; "Message":{"Content":"{\"Categorias\":[{\"Codigo\":45,\"Level\":1,\"Nome\":\"Livre Embratel|45\",\"IdDepartamento\":38,\"NomeDepartamento\":\"TelefoniaFixa\",\"IdCategoriaPai\":327,\"NomeCategoriaPai\":\"TelefoniaFixa\"},{\"Codigo\":300,\"Level\":1,\"Nome\":\"Talheres Descart&aacute;veis|300\",\"IdDepartamento\":2894,\"NomeDepartamento\":\"artigosdescartaveis\",\"IdCategoriaPai\":3295,\"NomeCategoriaPai\":\"artigosdescartaveis\"},{\"Codigo\":402,\"Level\":1,\"Nome\":\"Jogos Zeebo|402\",\"IdDepartamento\":336,\"NomeDepartamento\":\"Zeebo\",\"IdCategoriaPai\":400,\"NomeCategoriaPai\":\"Zeebo\"}]}"}</p>
<p>}</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3><a name="_Toc3568246"></a>o&nbsp;&nbsp; ProdutoParcial</h3>
<p><br /> Mensagem cont&eacute;m os produtos e skus que foram criados ou alterados nas bandeiras.</p>
<table width="577">
<tbody>
<tr>
<td width="577">
<p><strong>Request padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="577">
<p>{&nbsp;</p>
<p>&nbsp; "Bandeira":"Extra",</p>
<p>&nbsp; "CorrelationId" : "9639e252-41e5-463d-b923-679c6c1e4bf5",</p>
<p>&nbsp; "Message":{"Content":"{\"Produtos\":[{\"Codigo\":8275547,\"DisplayName\":\"Smartphone Asus Zenfone 4 Max DTV ZC554KL Preto com 16GB, Tela 5.5\\\", Dual Chip, C&acirc;mera Traseira Dupla, Android 7.0, Processador Quad Core e 2GB RAM\",\"DescricaoLonga\":\"&lt;p&gt;O &lt;strong&gt;ZenFone 4 Max DTV&lt;/strong&gt; &eacute; um parelho completo, que une a qualidade de um televisor com &agrave; mobilidade do celular.&lt;/p&gt;\",\"IdCategoria\":3266,\"CodigoFabricante\":645,\"NomeFabricante\":\"Asus\",\"FotoPequena\":863934947,\"FotoMedia\":863934951,\"FotoGrande\":863934954,\"PalavraChave\":\"martphone Asus Zenfone 4 Max DTV ZC554KL Preto com 16GB, Tela 5.5\\\", Dual Chip, C&acirc;mera Traseira Dupla, Android 7.0, Processador Quad Core e 2GB RAM&nbsp; Asus,Android,Smartphones,Telefones e Celulares\",\"MaisVendidos\":8,\"Skus\":[{\"IdSku\":11823957,\"Preco\":0.00,\"UltimaModificacao\":\"2018-01-19T16:52:12.56\",\"Habilitado\":true,\"Modelo\":\".\",\"EAN\":\"7898573295274\",\"Imagens\":[{\"ImageMenor\":863934955,\"ImagemMaior\":863934958,\"ImagemZoom\":863934962,\"Ordem\":1,\"ImagemMedia\":null}],\"Ordem\":null}],\"FichaTecnica\":{\"Grupos\":[{\"Itens\":[{\"Descricao\":\"Resolu&ccedil;&atilde;o c&acirc;mera frontal\",\"Valor\":\"De 5.0 a 8.9 MP\"}],\"Codigo\":514,\"Nome\":\"Especifica&ccedil;&otilde;es T&eacute;cnicas\"}]},\"FotoZoom\":null,\"OrdemImagem\":0,\"PermaLink\":\"smartphone-asus-zenfone-4-max-dtv-zc554kl-preto-com-16gb-tela-5-5-dual-chip-camera-traseira-dupla-android-7-0-processador-quad-core-e-2gb-ram-8275547\",\"PermaLinkCategoria\":\"android\",\"PermaLinkFabricante\":\"asus\",\"NomeCategoria\":\"Android\"},{\"Codigo\":8154832,\"DisplayName\":\"Smartphone Motorola Moto G5s XT1792 Ouro com 32GB, Tela de 5.2`&lt;/strong&gt;. O acabamento met&aacute;lico, al&eacute;m de deixar o celular mais resistente lhe confere muita sofistica&ccedil;&atilde;o.&lt;/p&gt;\",\"IdCategoria\":3266,\"CodigoFabricante\":356,\"NomeFabricante\":\"Motorola\",\"FotoPequena\":856378530,\"FotoMedia\":856378534,\"FotoGrande\":856378537,\"PalavraChave\":\"martphone Motorola Moto G5 S XT1792 Ouro com 32GB, Tela de 5.2``, Dual Chip, Android 7.1, 4G, C&acirc;mera 16MP, Processador Octa-Core e 2GB de RAM &lt;p&gt;A &lt;strong&gt;fam&iacute;lia Moto G&lt;/strong&gt; cresceu e traz o nov&iacute;ssimo &lt;strong&gt;\",\"MaisVendidos\":3032,\"Skus\":[{\"IdSku\":11700720,\"Preco\":0.00,\"UltimaModificacao\":\"2018-01-19T17:03:42.593\",\"Habilitado\":true,\"Modelo\":\".\",\"EAN\":\"7892597340927\",\"Imagens\":[{\"ImageMenor\":856378538,\"ImagemMaior\":856378541,\"ImagemZoom\":856378545,\"Ordem\":1,\"ImagemMedia\":null}],\"Ordem\":null}],\"FichaTecnica\":{\"Grupos\":[{\"Itens\":[{\"Descricao\":\"Resolu&ccedil;&atilde;o c&acirc;mera frontal\",\"Valor\":\"De 5.0 a 8.9 MP\"}],\"Codigo\":514,\"Nome\":\"Especifica&ccedil;&otilde;es T&eacute;cnicas\"}]},\"FotoZoom\":null,\"OrdemImagem\":0,\"PermaLink\":\"smartphone-motorola-moto-g5s-xt1792-ouro-com-32gb-tela-de-5-2-dual-chip-android-7-1-4g-camera-16mp-processador-octa-core-e-2gb-de-ram-8154832\",\"PermaLinkCategoria\":\"android\",\"PermaLinkFabricante\":\"motorola\",\"NomeCategoria\":\"Android\"}]}"}</p>
<p>&nbsp; }</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3><a name="_Toc3568247"></a>o&nbsp;&nbsp; Estoque&shy;</h3>
<p><br /> Mensagem cont&eacute;m a movimenta&ccedil;&atilde;o de estoque dos skus das bandeiras, informando se h&aacute; disponibilidade e qual &eacute; o saldo em estoque de determinado SKU.</p>
<table width="577">
<tbody>
<tr>
<td width="577">
<p><strong>Request padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="577">
<p>{<br /> "Bandeira":"AOC",<br /> "CorrelationId":"f0298bbc-c0e4-4784-9269-b2d85b61fa55", "Message":{"Content":"{\"Estoques\":[{\"IdSku\":295742,\"IdLojista\":31897,\"FlagSkuSaldoDisponivel\":true,\"SaldoEstoque\":7000000,\"DataUltimaAtualizacao\":\"2018-08-03T12:20:01,{\"IdSku\":13193400,\"IdLojista\":31897,\"FlagSkuSaldoDisponivel\":true,\"SaldoEstoque\":14,\"DataUltimaAtualizacao\":\"2018-08-03T12:20:01\"}]}"}<br /> }</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3><a name="_Toc3568248"></a>o&nbsp;&nbsp; Tracking</h3>
<p><br /> Mensagem cont&eacute;m toda altera&ccedil;&atilde;o de status dos pedidos.</p>
<table width="577">
<tbody>
<tr>
<td width="577">
<p><strong>Request padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="577">
<p>{&nbsp;</p>
<p>&nbsp; "Bandeira":"Extra",</p>
<p>&nbsp; "CorrelationId" : "9639e252-41e5-463d-b923-679c6c1e4bf5",</p>
<p>&nbsp; "Message":{"Content":"{\"Trackings\":[{&nbsp; \"IdCompra\": 0,&nbsp; \"StatusCompra\": null,&nbsp; \"IdPedidoParceiro\": null,&nbsp; \"IdParceiro\": 0,&nbsp; \"IdCampanha\": 0,&nbsp; \"DataPedidoParceiro\": \"0001-01-01T00:00:00\",&nbsp; \"IdContrato\": 0,&nbsp; \"Cnpj\": null,&nbsp; \"IdCanalVenda\": null,&nbsp; \"CodigoRastreio\": null,&nbsp; \"Transportadora\": null}]}"}</p>
<p>&nbsp; }</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3><a name="_Toc3568249"></a>o&nbsp;&nbsp; DisponibilidadePre&ccedil;o</h3>
<p><br /> Mensagem cont&eacute;m todas as altera&ccedil;&otilde;es de pre&ccedil;os, disponibilidade e tipos de entrega dos skus.</p>
<table width="577">
<tbody>
<tr>
<td width="577">
<p><strong>Request padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="577">
<p>{</p>
<p>&nbsp; "Bandeira":"Extra",</p>
<p>&nbsp; "CorrelationId" : "9639e252-41e5-463d-b923-679c6c1e4bf5",</p>
<p>&nbsp; "Message":{"Content":"{\"Skus\":[{\"Codigo\":8477,\"PrecoDe\":113.7400,\"PrecoPor\":96.7500,\"Disponibilidade\":1,\"IdCampanha\":55,\"IdLojista\":15},{\"Codigo\":8507,\"PrecoDe\":1999.0000,\"PrecoPor\":1399.3000,\"Disponibilidade\":1,\"IdCampanha\":55,\"IdLojista\":15}]}"}<br /> </p>
<p>}</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h3><a name="_Toc3568250"></a>o&nbsp;&nbsp; Campanha</h3>
<p><br /> Mensagem cont&eacute;m toda cria&ccedil;&atilde;o e altera&ccedil;&atilde;o de campanha, al&eacute;m de altera&ccedil;&otilde;es nas datas de vig&ecirc;ncia.</p>
<table width="577">
<tbody>
<tr>
<td width="577">
<p><strong>Request padr&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="577">
<p>{</p>
<p>&nbsp; "Bandeira":"Extra",</p>
<p>&nbsp; "CorrelationId" : "9639e252-41e5-463d-b923-679c6c1e4bf5",</p>
<p>&nbsp; "Message":{"Content":"{\"Campanhas\":[{\"IdCampanha\":null,&nbsp;&nbsp; \"Nome\":null,&nbsp;&nbsp; \"DataInicial\":null,&nbsp;&nbsp; \"DataFinal\":null,&nbsp;&nbsp; \"FlagVigente\":null,&nbsp;&nbsp; \"EntregasTipo\":[&nbsp;&nbsp; { \"IdTipoEntrega\":0,&nbsp;&nbsp;&nbsp; \"FlagDisponivel\":null }&nbsp;&nbsp; ]}]}"}</p>
<p>&nbsp;</p>
<p>}</p>
</td>
</tr>
</tbody>
</table>
<h1><a name="_Toc3568251"></a>6. Integra&ccedil;&atilde;o B2B</h1>
<p>O B2B disponibiliza 2 formas de integra&ccedil;&atilde;o com os parceiros. A cria&ccedil;&atilde;o de pedidos, consulta de produtos e formas de pagamento, al&eacute;m de outras informa&ccedil;&otilde;es, s&atilde;o expostas atrav&eacute;s do nosso WebService SOAP, que j&aacute; se encontra obsoleto, e atrav&eacute;s da API Rest que atualmente &eacute; a forma oficial adotada para integra&ccedil;&atilde;o com os parceiros. <br /> No ambiente produtivo, apenas os IPs dos parceiros cadastrados em nosso firewall ter&atilde;o acesso aos servi&ccedil;os (SOAP e API Rest). A solicita&ccedil;&atilde;o de libera&ccedil;&atilde;o deve ser enviada a equipe do comercial da Via Varejo.</p>
<h2><a name="_Toc3568252"></a>6.1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WebService &ndash; Servi&ccedil;o SOAP</h2>
<p>&nbsp;</p>
<p>Existem dois documentos que s&atilde;o utilizados para integra&ccedil;&atilde;o via WebService. <br /> <br /> <strong>B2B - Documenta&ccedil;&atilde;o Servi&ccedil;o SOAP Vx.x.docx</strong> : Documento com a especifica&ccedil;&atilde;o dos m&eacute;todos comuns para cria&ccedil;&atilde;o de pedido, confirma&ccedil;&atilde;o de pedido, consulta de status de pedido, etc. <br /> <strong>B2B - Documenta&ccedil;&atilde;o Servi&ccedil;o SOAP - Pagto Complementar V.x.x.docx</strong> : Documento com a especifica&ccedil;&atilde;o dos m&eacute;todos para gera&ccedil;&atilde;o de pedidos com uso de dados de cart&atilde;o de cr&eacute;dito e uso de criptografia.<br /> <br /> Esses documentos podem ser solicitados a Via Varejo, caso o parceiro utilize a integra&ccedil;&atilde;o via WebService. O mais recomendado &eacute; que o parceiro utilize sempre a API Rest.</p>
<h2><a name="_Toc3568253"></a>6.2.&nbsp; API Rest<br /> </h2>
<p>A API Rest &eacute; a forma oficial de integra&ccedil;&atilde;o do parceiro com o B2B. A sua documenta&ccedil;&atilde;o est&aacute; dispon&iacute;vel no swagger da API. Abaixo segue a rela&ccedil;&atilde;o das URLs de todas as bandeiras: <br /> </p>
<table>
<tbody>
<tr>
<td width="566">
<p><strong>URLS da API em produ&ccedil;&atilde;o</strong></p>
</td>
</tr>
<tr>
<td width="566">
<p>https://api-integracao-b2b.aocloja.com.br&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>https://api-integracao-b2b.barateiro.com.br&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>https://api-integracao-b2b.lojahp.com.br&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>https://api-integracao-b2b.extra.com.br&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>https://api-integracao-b2b.pontofrio.com.br&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>https://api-integracao-b2b.casasbahia.com.br</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;<br /> A documenta&ccedil;&atilde;o &eacute; acessada atrav&eacute;s da URL /Swagger. Ex: <strong>https://api-integracao-b2b.aocloja.com.br/swagger</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<p>- O Token de autoriza&ccedil;&atilde;o do parceiro, enviada via header nas requisi&ccedil;&otilde;es, &eacute; enviada pela equipe de TI ou comercial da Via Varejo. <br /> - A Api-integracao-B2B s&oacute; trabalha com o protocolo TLS 1.2<br /> <br /> </p>
<p>&nbsp;</p>
<p><br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> </p>
<p>M&eacute;todos da API:</p>
<h1><a name="_Toc3568254"></a>7. Criptografia dos dados de cart&atilde;o</h1>
<p>Como medida de seguran&ccedil;a, os dados de cart&atilde;o de credito devem ser criptografados antes do envelopamento SOAP. A encripta&ccedil;&atilde;o ser&aacute; do tipo RSA2048 (RSA2048 PKCS1-UTF8) e utilizar&aacute; uma chave p&uacute;blica e um certificado de seguran&ccedil;a (.cer) da Via Varejo.</p>
<p>Para obter a chave p&uacute;blica e o certificado de seguran&ccedil;a, acessar a URL /Swagger abaixo:</p>
<p>&egrave; https://api-integracao-b2b.extrahlg.net/swagger</p>
<h1><a name="_Toc3568255"></a>8. Dicion&aacute;rio de dados</h1>
<p>As informa&ccedil;&otilde;es geradas nos arquivos XML e enviadas via mensageria, est&atilde;o separadas por t&oacute;picos, e detalhadas abaixo:</p>
<table>
<tbody>
<tr>
<td colspan="2" width="566">
<p><strong>Categoria</strong></p>
</td>
</tr>
<tr>
<td width="141">
<p><strong>Codigo</strong></p>
</td>
<td width="426">
<p>Codigo da categoria</p>
</td>
</tr>
<tr>
<td width="141">
<p><strong>Level</strong></p>
</td>
<td width="426">
<p>N&iacute;vel da categoria</p>
</td>
</tr>
<tr>
<td width="141">
<p><strong>Nome</strong></p>
</td>
<td width="426">
<p>Nome da categoria</p>
</td>
</tr>
<tr>
<td width="141">
<p><strong>IdDepartamento</strong></p>
</td>
<td width="426">
<p>Id do departamento</p>
</td>
</tr>
<tr>
<td width="141">
<p><strong>NomeDepartamento</strong></p>
</td>
<td width="426">
<p>Nome do departamento</p>
</td>
</tr>
<tr>
<td width="141">
<p><strong>IdCategoriaPai</strong></p>
</td>
<td width="426">
<p>Id da categoria pai</p>
</td>
</tr>
<tr>
<td width="141">
<p><strong>NomeCategoriaPai</strong></p>
</td>
<td width="426">
<p>Nome da categoria pai</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table>
<tbody>
<tr>
<td colspan="2" width="566">
<p><strong>Produto</strong></p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Codigo</strong></p>
</td>
<td width="408">
<p>C&oacute;digo do produto</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>DisplayName</strong></p>
</td>
<td width="408">
<p>Nome do produto</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>DescricaoLonga</strong></p>
</td>
<td width="408">
<p>Descri&ccedil;&atilde;o longa do produto</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Categoria</strong></p>
</td>
<td width="408">
<p>Id da categoria</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>CodigoFabricante</strong></p>
</td>
<td width="408">
<p>C&oacute;digo do fabricante</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Fabricante</strong></p>
</td>
<td width="408">
<p>Nome do fabricante</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>FotoPequena</strong></p>
</td>
<td width="408">
<p>Foto pequena</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>FotoMedia</strong></p>
</td>
<td width="408">
<p>Foto media</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>FotoGrande</strong></p>
</td>
<td width="408">
<p>Foto grande</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>PalavraChave</strong></p>
</td>
<td width="408">
<p>Palavra chave do produto</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>MaisVendidos</strong></p>
</td>
<td width="408">
<p>Produto mais vendido</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Skus</strong></p>
</td>
<td width="408">
<p>Objeto</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.Codigo</strong></p>
</td>
<td width="408">
<p>C&oacute;digo do sku</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.Preco</strong></p>
</td>
<td width="408">
<p>Pre&ccedil;o do sku</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.UltimaModificacao</strong></p>
</td>
<td width="408">
<p>Data da ultima modifica&ccedil;&atilde;o do sku</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.Habilitado</strong></p>
</td>
<td width="408">
<p>Flag habilitado</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.Modelo</strong></p>
</td>
<td width="408">
<p>Modelo do sku</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.EAN</strong></p>
</td>
<td width="408">
<p>C&oacute;digo EAN</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.Peso</strong></p>
</td>
<td width="408">
<p>Peso do sku</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.Altura</strong></p>
</td>
<td width="408">
<p>Altura do sku</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.Largura</strong></p>
</td>
<td width="408">
<p>Largura do sku</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.Comprimento</strong></p>
</td>
<td width="408">
<p>Comprimento do sku</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Sku.Imagens</strong></p>
</td>
<td width="408">
<p>Objeto</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Imagem.ImagemMenor</strong></p>
</td>
<td width="408">
<p>Imagem menor</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Imagem.ImagemMaior</strong></p>
</td>
<td width="408">
<p>Imagem maior</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Imagem.ImagemZoom</strong></p>
</td>
<td width="408">
<p>Imagem zoom</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Imagem.Ordem</strong></p>
</td>
<td width="408">
<p>Ordem da imagem</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>FichaTecnica</strong></p>
</td>
<td width="408">
<p>Objeto</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>FichaTecnica.Grupos</strong></p>
</td>
<td width="408">
<p>Objeto</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Grupo.Codigo</strong></p>
</td>
<td width="408">
<p>C&oacute;digo do grupo</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Grupo.Nome</strong></p>
</td>
<td width="408">
<p>Nome do grupo</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Grupo.Itens</strong></p>
</td>
<td width="408">
<p>Objeto</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Item.Descricao</strong></p>
</td>
<td width="408">
<p>Descri&ccedil;&atilde;o do item (grupo)</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>Item.Valor</strong></p>
</td>
<td width="408">
<p>Descri&ccedil;&atilde;o do item</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>FotoZoom</strong></p>
</td>
<td width="408">
<p>&nbsp;</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>OrdemImagem</strong></p>
</td>
<td width="408">
<p>&nbsp;</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>PermaLink</strong></p>
</td>
<td width="408">
<p>&nbsp;</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>PermaLinkCategoria</strong></p>
</td>
<td width="408">
<p>&nbsp;</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>PermaLinkFabricante</strong></p>
</td>
<td width="408">
<p>&nbsp;</p>
</td>
</tr>
<tr>
<td width="158">
<p><strong>NomeCategoria</strong></p>
</td>
<td width="408">
<p>&nbsp;</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table>
<tbody>
<tr>
<td colspan="2" width="566">
<p><strong>Estoque</strong></p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>IdSku</strong></p>
</td>
<td width="434">
<p>Id do sku</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>IdLojista</strong></p>
</td>
<td width="434">
<p>Id do lojista</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>FlagSkuSaldoDisponivel</strong></p>
</td>
<td width="434">
<p>Flag para verificar saldo dispon&iacute;vel do sku</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>SaldoEstoque</strong></p>
</td>
<td width="434">
<p>Saldo em estoque do sku</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>DataUltimaAtualizacao</strong></p>
</td>
<td width="434">
<p>Data da ultima atualiza&ccedil;&atilde;o do sku</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table>
<tbody>
<tr>
<td colspan="2" width="566">
<p><strong>SkuLojista / DisponibilidadePre&ccedil;o</strong></p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Skus</strong></p>
</td>
<td width="434">
<p>Objeto</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Sku.Codigo</strong></p>
</td>
<td width="434">
<p>C&oacute;digo do sku</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Sku.PrecoDe</strong></p>
</td>
<td width="434">
<p>Preco De do sku</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Sku.PrecoPor</strong></p>
</td>
<td width="434">
<p>Preco Por do sku</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Sku.Disponibilidade</strong></p>
</td>
<td width="434">
<p>Disponibilidade do sku</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Sku.IdCampanha</strong></p>
</td>
<td width="434">
<p>Id da campanha</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Sku.IdLojista</strong></p>
</td>
<td width="434">
<p>Id do lojista</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table>
<tbody>
<tr>
<td colspan="2" width="566">
<p><strong>Tracking</strong></p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>IdCompra</strong></p>
</td>
<td width="434">
<p>Id da compra</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>StatusCompra</strong></p>
</td>
<td width="434">
<p>Status da compra</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>IdPedidoParceiro</strong></p>
</td>
<td width="434">
<p>Id do pedido do parceiro</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>IdParceiro</strong></p>
</td>
<td width="434">
<p>Id do parceiro</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>IdCampanha</strong></p>
</td>
<td width="434">
<p>Id da campanha</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>DataPedidoParceiro</strong></p>
</td>
<td width="434">
<p>Data do pedido do parceiro</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>IdContrato</strong></p>
</td>
<td width="434">
<p>Id do contrato do parceiro</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Cnpj</strong></p>
</td>
<td width="434">
<p>Cnpj do parceiro</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>IdCanalVenda</strong></p>
</td>
<td width="434">
<p>Id do canal de venda</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>CodigoRastreio</strong></p>
</td>
<td width="434">
<p>C&oacute;digo do rastreio</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Transportadora</strong></p>
</td>
<td width="434">
<p>Transportadora</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table>
<tbody>
<tr>
<td colspan="2" width="566">
<p><strong>Lojista</strong></p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Codigo</strong></p>
</td>
<td width="434">
<p>C&oacute;digo do lojista</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>NomeLojista</strong></p>
</td>
<td width="434">
<p>Nome do lojista</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<table>
<tbody>
<tr>
<td colspan="2" width="566">
<p><strong>Campanha</strong></p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>IdCampanha</strong></p>
</td>
<td width="434">
<p>Id da campanha</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>Nome</strong></p>
</td>
<td width="434">
<p>Nome da campanha</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>DataIncicial</strong></p>
</td>
<td width="434">
<p>Data inicial da campanha (vig&ecirc;ncia)</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>DataFinal</strong></p>
</td>
<td width="434">
<p>Data final da campanha (vig&ecirc;ncia)</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>FlagVigente</strong></p>
</td>
<td width="434">
<p>Flag que indica se a campanha est&aacute; vigente</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>EntregasTipo</strong></p>
</td>
<td width="434">
<p>Objeto</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>EntregasTipo.IdTipoEntrega</strong></p>
</td>
<td width="434">
<p>Id do tipo da entrega</p>
</td>
</tr>
<tr>
<td width="132">
<p><strong>EntregasTipo.FlagDisponivel</strong></p>
</td>
<td width="434">
<p>Flag que indica se o tipo da entrega est&aacute; dispon&iacute;vel</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Abaixo est&atilde;o listados os status de pedidos do B2B:<br /> </p>
<table>
<tbody>
<tr>
<td width="201">
<p><strong>C&oacute;digo Status (C&oacute;digo do Status da Entrega do Pedido)</strong></p>
</td>
<td width="339">
<p><strong>Descri&ccedil;&atilde;o Status (Mensagem do Status da Entrega do Pedido)</strong></p>
</td>
</tr>
<tr>
<td width="201">
<p>_CANM</p>
</td>
<td width="339">
<p>Pedido cancelado automaticamente por falta de confirma&ccedil;&atilde;o</p>
</td>
</tr>
<tr>
<td width="201">
<p>_CANP</p>
</td>
<td width="339">
<p>Pedido Cancelado pelo Parceiro</p>
</td>
</tr>
<tr>
<td width="201">
<p>_PB2B</p>
</td>
<td width="339">
<p>Pedido aguardando confirma&ccedil;&atilde;o</p>
</td>
</tr>
<tr>
<td width="201">
<p>_PEDC</p>
</td>
<td width="339">
<p>Pedido Confirmado pelo parceiro</p>
</td>
</tr>
<tr>
<td width="201">
<p>AAP</p>
</td>
<td width="339">
<p>Enviado Pagamento</p>
</td>
</tr>
<tr>
<td width="201">
<p>ACR</p>
</td>
<td width="339">
<p>Aguardando An&aacute;lise de Fraude</p>
</td>
</tr>
<tr>
<td width="201">
<p>AES</p>
</td>
<td width="339">
<p>Aguardando Estoque F&iacute;sico</p>
</td>
</tr>
<tr>
<td width="201">
<p>AMC</p>
</td>
<td width="339">
<p>Analise Manual de Fraude</p>
</td>
</tr>
<tr>
<td width="201">
<p>ARE</p>
</td>
<td width="339">
<p>Aguardando Retira (Correios )</p>
</td>
</tr>
<tr>
<td width="201">
<p>ATR</p>
</td>
<td width="339">
<p>Autorizado Reentrega</p>
</td>
</tr>
<tr>
<td width="201">
<p>CAN</p>
</td>
<td width="339">
<p>Cancelado</p>
</td>
</tr>
<tr>
<td width="201">
<p>CAP</p>
</td>
<td width="339">
<p>Cr&eacute;dito Aprovado</p>
</td>
</tr>
<tr>
<td width="201">
<p>CHU</p>
</td>
<td width="339">
<p>Excesso de Chuvas</p>
</td>
</tr>
<tr>
<td width="201">
<p>CME</p>
</td>
<td width="339">
<p>CLIENTE MUDOU DE ENDERE&Ccedil;O</p>
</td>
</tr>
<tr>
<td width="201">
<p>DDL</p>
</td>
<td width="339">
<p>DESTINATARIO DESCONHECIDO NO LOCAL</p>
</td>
</tr>
<tr>
<td width="201">
<p>DIE</p>
</td>
<td width="339">
<p>DADOS INSUFICIENTES PARA ENTREGA</p>
</td>
</tr>
<tr>
<td width="201">
<p>DRE</p>
</td>
<td width="339">
<p>Dificuldades na Regi&atilde;o de Entrega</p>
</td>
</tr>
<tr>
<td width="201">
<p>EA1</p>
</td>
<td width="339">
<p>Destinat&aacute;rio ausente na primeira tentativa</p>
</td>
</tr>
<tr>
<td width="201">
<p>EA2</p>
</td>
<td width="339">
<p>Destinat&aacute;rio ausente na segunda tentativa</p>
</td>
</tr>
<tr>
<td width="201">
<p>EA3</p>
</td>
<td width="339">
<p>Destinat&aacute;rio ausente na terceira tentativa</p>
</td>
</tr>
<tr>
<td width="201">
<p>EAG</p>
</td>
<td width="339">
<p>Aguardando Reagendamento</p>
</td>
</tr>
<tr>
<td width="201">
<p>ENE</p>
</td>
<td width="339">
<p>EXTRAVIO NOTA DE ENTREGA</p>
</td>
</tr>
<tr>
<td width="201">
<p>ENL</p>
</td>
<td width="339">
<p>ENDERECO N&Atilde;O LOCALIZADO</p>
</td>
</tr>
<tr>
<td width="201">
<p>ENT</p>
</td>
<td width="339">
<p>Pedido Entregue com Sucesso</p>
</td>
</tr>
<tr>
<td width="201">
<p>ETR</p>
</td>
<td width="339">
<p>Entregue Transportadora</p>
</td>
</tr>
<tr>
<td width="201">
<p>FIS</p>
</td>
<td width="339">
<p>NFs com problemas na fiscaliza&ccedil;&atilde;o</p>
</td>
</tr>
<tr>
<td width="201">
<p>MPD</p>
</td>
<td width="339">
<p>Mercadoria em desacordo com o pedido</p>
</td>
</tr>
<tr>
<td width="201">
<p>NAP</p>
</td>
<td width="339">
<p>Transportador n&atilde;o atende pra&ccedil;a</p>
</td>
</tr>
<tr>
<td width="201">
<p>NFS</p>
</td>
<td width="339">
<p>NF Emitida</p>
</td>
</tr>
<tr>
<td width="201">
<p>PAP</p>
</td>
<td width="339">
<p>Pedido Aprovado</p>
</td>
</tr>
<tr>
<td width="201">
<p>PEDCR</p>
</td>
<td width="339">
<p>Pedido criado</p>
</td>
</tr>
<tr>
<td width="201">
<p>PEI</p>
</td>
<td width="339">
<p>Pedido Inclu&iacute;do</p>
</td>
</tr>
<tr>
<td width="201">
<p>PNA</p>
</td>
<td width="339">
<p>Pagamento n&atilde;o Aprovado</p>
</td>
</tr>
<tr>
<td width="201">
<p>PNR</p>
</td>
<td width="339">
<p>PRODUTO N&Atilde;O ENTRA NA RESIDENCIA</p>
</td>
</tr>
<tr>
<td width="201">
<p>POT</p>
</td>
<td width="339">
<p>Problemas Operacionais no Transportador</p>
</td>
</tr>
<tr>
<td width="201">
<p>PRE</p>
</td>
<td width="339">
<p>Pedido recusado</p>
</td>
</tr>
<tr>
<td width="201">
<p>REC</p>
</td>
<td width="339">
<p>Rejeitado no Fraude (*)</p>
</td>
</tr>
<tr>
<td width="201">
<p>REE</p>
</td>
<td width="339">
<p>Reentrega solicitada pelo cliente</p>
</td>
</tr>
<tr>
<td width="201">
<p>REP</p>
</td>
<td width="339">
<p>Reentrega</p>
</td>
</tr>
<tr>
<td width="201">
<p>RET</p>
</td>
<td width="339">
<p>Recusado por Terceiros</p>
</td>
</tr>
<tr>
<td width="201">
<p>REV</p>
</td>
<td width="339">
<p>Recupera&ccedil;&atilde;o de Vendas</p>
</td>
</tr>
<tr>
<td width="201">
<p>ROT</p>
</td>
<td width="339">
<p>Em rota de entrega</p>
</td>
</tr>
<tr>
<td width="201">
<p>SEF</p>
</td>
<td width="339">
<p>Selagem Fiscal</p>
</td>
</tr>
<tr>
<td width="201">
<p>WMS</p>
</td>
<td width="339">
<p>No WMS</p>
</td>
</tr>
</tbody>
</table>
<h1><a name="_Toc3568256"></a>9. Ambiente de Testes</h1>
<p><br /> Para os parceiros utilizarem o ambiente de testes da via varejo, os IPS de sa&iacute;da precisam ser liberados no firewall. A configura&ccedil;&atilde;o de campanhas e benef&iacute;cios, tokens de autentica&ccedil;&atilde;o deste ambiente, precisam ser tratados diretamente com a equipe comercial e TI da via varejo. Disponibilizamos 3 bandeiras para homologa&ccedil;&atilde;o, relacionadas no t&oacute;pico abaixo</p>
<h2><a name="_Toc3568257"></a>9.1. Urls<br /> </h2>
<table>
<tbody>
<tr>
<td width="566">
<p><strong>WebService &ndash; Servi&ccedil;o Soap</strong></p>
</td>
</tr>
<tr>
<td width="566">
<p>https://b2b.extrahlg.net/secure/parceirosv3SSL.svc</p>
</td>
</tr>
<tr>
<td width="566">
<p>https://b2b.pontofriohlg.net/secure/parceirosv3SSL.svc</p>
</td>
</tr>
<tr>
<td width="566">
<p>https://b2b.casasbahiahlg.net/secure/parceirosv3SSL.svc</p>
</td>
</tr>
<tr>
<td width="566">
<p><strong>WebService &ndash; Servi&ccedil;o Soap &ndash; Pagto Complementar</strong></p>
</td>
</tr>
<tr>
<td width="566">
<p>https://b2b.extrahlg.net/secure/parceirosSSL.svc</p>
</td>
</tr>
<tr>
<td width="566">
<p>https://b2b.pontofriohlg.net/secure/parceirosSSL.svc</p>
</td>
</tr>
<tr>
<td width="566">
<p>https://b2b.casasbahiahlg.net/secure/parceirosSSL.svc</p>
</td>
</tr>
<tr>
<td width="566">
<p><strong>API Rest &ndash; Integra&ccedil;&atilde;o B2B</strong></p>
</td>
</tr>
<tr>
<td width="566">
<p>https://api-integracao-b2b.extrahlg.net</p>
</td>
</tr>
<tr>
<td width="566">
<p>https://api-integracao-b2b.pontofriohlg.net</p>
</td>
</tr>
<tr>
<td width="566">
<p>https://api-integracao-b2b.casasbahiahlg.net</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h2><a name="_Toc3568258"></a>9.2. Certificados</h2>
<p><br /> Os certificados auto-assinados precisam ser instalados manualmente pelos parceiros. Temos 1 certificado para cada bandeira. Abaixo o link para download <br /> </p>
<table>
<tbody>
<tr>
<td width="566">
<p><strong>API Rest &ndash; Integra&ccedil;&atilde;o B2B</strong></p>
</td>
</tr>
<tr>
<td width="566">
<p>http://api-integracao-b2b.extrahlg.net/seguranca/certificados?ambiente=HLG-Externo</p>
</td>
</tr>
<tr>
<td width="566">
<p>http://api-integracao-b2b.pontofriohlg.net/seguranca/certificados?ambiente=HLG-Externo</p>
</td>
</tr>
<tr>
<td width="566">
<p>http://api-integracao-b2b.casasbahiahlg.net/seguranca/certificados?ambiente=HLG-Externo</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Para instalar os certificados siga o roteiro abaixo:<br /> 1 &ndash; Abra o aplicativo certmgr.msc</p>
<p>1.1 &ndash; Selecione a arvore Autoridades de Certifica&ccedil;&atilde;o Raiz Confi&aacute;veis/Certificados, se j&aacute; possuir os certificados fora da validade apaga-los, antes de continuar o procedimento de instala&ccedil;&atilde;o do novo.</p>
<p>Bot&atilde;o direito em cima do certificado &egrave; Excluir</p>
<p>2 &ndash; Selecione a op&ccedil;&atilde;o &ldquo;Importar...&rdquo; dentro da pasta Autoridades de Certifica&ccedil;&atilde;o Raiz Confi&aacute;veis/Certificados</p>
<p>3 &ndash; Na primeira janela, clique em pr&oacute;ximo, onde aparecera a op&ccedil;&atilde;o para selecionar o certificado. Selecione a op&ccedil;&atilde;o &ldquo;Todos os arquivos&rdquo; e navegue at&eacute; a pasta onde o certificado se encontra (extrahlg.net.pfx).</p>
<p>4 &ndash; Preencha a senha do certificado ParceiroExtra@001</p>
<p>5 &ndash; Deixe selecionada a op&ccedil;&atilde;o padr&atilde;o</p>
<p>6 &ndash; Caso seja instalado, ser&aacute; exibida a tela de conclus&atilde;o</p>
<p>7 &ndash; Ap&oacute;s a conclus&atilde;o, aparecera a janela de confirma&ccedil;&atilde;o de senha, digite novamente a mesma senha ParceiroExtra@001</p>
<p>8 &ndash; Ao finalizar, o certificado aparecera como confi&aacute;vel</p>
<h1><a name="_Toc3568259"></a>10. D&uacute;vidas ou Ocorr&ecirc;ncias</h1>
<p>Para esclarecimento de d&uacute;vidas voc&ecirc; dever&aacute; encaminhar um e-mail para <a href="mailto:ewerton.sousa-ext@viavarejo.com.br">ewerton.sousa-ext@viavarejo.com.br</a>.</p>
<p>Em caso de problemas &eacute; de extrema import&acirc;ncia que disponibilizem evid&ecirc;ncias t&eacute;cnicas, para que possamos avaliar, exemplo:</p>
<ul>
<li>Request</li>
<li>Response</li>
<li>Ambiente</li>
<li>URL de servi&ccedil;o</li>
<li>Imagens</li>
</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
